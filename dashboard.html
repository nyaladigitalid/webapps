<!DOCTYPE html>
<html class="dark" lang="id">
<head>
    <script>(function(){try{var t=localStorage.getItem("theme");if(t==="light"){document.documentElement.classList.remove("dark");}else{document.documentElement.classList.add("dark");}}catch(e){document.documentElement.classList.add("dark");}})();</script>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Nyala Digital Apps - Super Admin Dashboard</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        primary: "#ef7225",
                        secondary: "#0d3b66",
                        "background-light": "#f5f7f8",
                        "background-dark": "#0b0e14",
                        "sidebar-dark": "#101922"
                    },
                    fontFamily: {
                        display: ["Inter", "sans-serif"]
                    },
                    borderRadius: {
                        DEFAULT: "0.5rem",
                        lg: "0.5rem",
                        xl: "0.75rem",
                        full: "9999px"
                    }
                }
            }
        };
    </script>
    <style>
        body {
            font-family: "Inter", sans-serif;
        }
        .glass-surface {
            background: radial-gradient(circle at top left, rgba(249, 115, 22, 0.14), transparent 60%), radial-gradient(circle at bottom right, rgba(29, 155, 240, 0.18), transparent 60%);
        }
        .glass-panel { background: rgba(255,255,255,0.7); border: 1px solid rgba(15,23,42,0.1); backdrop-filter: blur(22px); -webkit-backdrop-filter: blur(22px); }
        .metric-card { background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(248,250,252,0.92)); border: 1px solid rgba(15,23,42,0.08); }
        .pill { background: linear-gradient(135deg, rgba(29,155,240,0.08), rgba(249,115,22,0.08)); }
        .dark .glass-panel { background: rgba(6, 12, 31, 0.94); border: 1px solid rgba(148, 163, 184, 0.35); }
        .dark .metric-card { background: linear-gradient(135deg, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 0.92)); border: 1px solid rgba(255,255,255,0.1); }
        .dark .pill { background: linear-gradient(135deg, rgba(249, 115, 22, 0.18), rgba(29, 155, 240, 0.22)); }
        .layout-sidebar {
            display: flex;
        }
        .sidebar-hidden .layout-sidebar {
            display: none;
        }
        html:not(.dark) body[data-active="overview"].bg-background-light {
            background-color: #fafaf9 !important;
        }
        html:not(.dark) body[data-active="overview"] .metric-card {
            background: linear-gradient(180deg, #fffbf7 0%, #ffffff 100%) !important;
            border: 1px solid rgba(239, 114, 37, 0.08) !important;
            box-shadow: 0 2px 10px rgba(239, 114, 37, 0.04), 0 10px 25px -5px rgba(239, 114, 37, 0.06) !important;
        }
        
        html:not(.dark) body[data-active="overview"] .accent-card {
            background: #ffffff !important;
            border: 1px solid rgba(242, 223, 214, 0.6) !important;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.02), 0 2px 4px -1px rgba(0, 0, 0, 0.02) !important;
        }
        html:not(.dark) body[data-active="overview"] .glass-panel {
            background: #ffffff !important;
            border: 1px solid rgba(226, 232, 240, 0.8) !important;
            box-shadow: 0 4px 20px -2px rgba(0, 0, 0, 0.03) !important;
        }
        html:not(.dark) body[data-active="overview"] table tbody {
            color: #1e293b !important;
        }
        html:not(.dark) body[data-active="overview"] table tbody .text-secondary\/70 {
            color: #64748b !important;
        }
        html:not(.dark) body[data-active="overview"] h1,
        html:not(.dark) body[data-active="overview"] .font-semibold,
        html:not(.dark) body[data-active="overview"] .font-medium {
            color: #334155 !important;
        }
        html:not(.dark) body[data-active="overview"] .text-secondary\/80,
        html:not(.dark) body[data-active="overview"] .text-secondary\/60,
        html:not(.dark) body[data-active="overview"] p,
        html:not(.dark) body[data-active="overview"] .text-\[\#c7d2fe\] {
            color: #64748b !important;
        }
        html:not(.dark) body[data-active="overview"] .text-white,
        html:not(.dark) body[data-active="overview"] .text-white\/90 {
            color: #334155 !important;
        }
        html:not(.dark) body[data-active="overview"] .metric-card .text-lg {
            color: #1e293b !important;
        }
        html:not(.dark) body[data-active="overview"] .accent-card::before {
            content: "";
            position: absolute;
            left: 0;
            top: 20px;
            bottom: 20px;
            width: 3px;
            border-radius: 0 4px 4px 0;
            background: #ef7225;
        }
        .glow-success { box-shadow: 0 0 20px rgba(16, 185, 129, 0.35); }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.1); border-radius: 10px; }
    </style>
</head>
<body class="bg-background-light text-slate-900 dark:bg-background-dark dark:text-white min-h-screen glass-surface font-display" data-active="overview">
    <div class="hidden dark:block fixed inset-0 pointer-events-none opacity-30">
        <div class="absolute inset-0 bg-[radial-gradient(#0f172a_1px,transparent_1px)] [background-size:40px_40px]"></div>
    </div>
    <div class="relative z-10 min-h-screen flex flex-col">
        <div id="include-header"></div>
        <div class="flex-1 max-w-7xl mx-auto w-full px-6 py-6 flex gap-5">
            <div id="include-sidebar"></div>
            <main class="flex-1 flex flex-col gap-4">
                <section class="flex flex-col md:flex-row md:items-center md:justify-between gap-3">
                    <div>
                        <h1 class="text-xl md:text-2xl font-semibold tracking-tight">Ringkasan operasional hari ini</h1>
                        <p class="text-xs text-secondary/80 mt-1">Status keuangan, pesanan, dan deadline produksi.</p>
                    </div>
                    <div class="flex items-center gap-3">
                        <button class="inline-flex items-center gap-2 rounded-full px-3 py-1.5 text-[11px] font-medium text-secondary/80 bg-white/5 hover:bg-white/10 transition-colors">
                            <span class="material-symbols-outlined text-sm">calendar_month</span>
                            <span>Hari ini • 07:00–23:59</span>
                        </button>
                        <button class="hidden sm:inline-flex items-center gap-2 rounded-full px-3 py-1.5 text-[11px] font-medium text-white pill hover:brightness-110 transition">
                            <span class="material-symbols-outlined text-sm">ios_share</span>
                            <span>Export laporan</span>
                        </button>
                    </div>
                </section>
                <div id="admin-dashboard-content">
                    <section class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 mt-1">
                        <!-- Active Orders -->
                        <div class="metric-card rounded-2xl border border-white/10 px-4 py-3.5 flex flex-col gap-2">
                            <div class="flex items-center justify-between text-[11px] text-secondary/80">
                                <span>Order Aktif</span>
                            </div>
                            <div class="flex items-end justify-between">
                                <p class="text-lg font-semibold" id="stat-active-orders">-</p>
                                <p class="text-[10px] text-secondary/60">Total berjalan</p>
                            </div>
                        </div>
                        <!-- Revenue This Month -->
                        <div class="metric-card rounded-2xl border border-white/10 px-4 py-3.5 flex flex-col gap-2">
                            <div class="flex items-center justify-between text-[11px] text-secondary/80">
                                <span>Pemasukan Bulan Ini</span>
                            </div>
                            <div class="flex items-end justify-between">
                                <p class="text-lg font-semibold" id="stat-revenue">-</p>
                                <p class="text-[10px] text-secondary/60">Bulan ini</p>
                            </div>
                        </div>
                        <!-- New Clients -->
                        <div class="metric-card rounded-2xl border border-white/10 px-4 py-3.5 flex flex-col gap-2">
                            <div class="flex items-center justify-between text-[11px] text-secondary/80">
                                <span>Klien Baru</span>
                            </div>
                            <div class="flex items-end justify-between">
                                <p class="text-lg font-semibold" id="stat-new-clients">-</p>
                                <p class="text-[10px] text-secondary/60">Bulan ini</p>
                            </div>
                        </div>
                        <!-- Active Campaigns -->
                        <div class="metric-card rounded-2xl border border-white/10 px-4 py-3.5 flex flex-col gap-2">
                            <div class="flex items-center justify-between text-[11px] text-secondary/80">
                                <span>Kampanye Aktif</span>
                            </div>
                            <div class="flex items-end justify-between">
                                <p class="text-lg font-semibold" id="stat-active-campaigns">-</p>
                                <p class="text-[10px] text-secondary/60">Status ACTIVE</p>
                            </div>
                        </div>
                    </section>

                    <section class="mt-4">
                        <div class="glass-panel rounded-2xl overflow-hidden">
                            <div class="p-6 border-b border-white/5 flex justify-between items-center">
                                <h4 class="text-lg font-bold text-white">Pesanan Terbaru</h4>
                            </div>
                            <div class="overflow-x-auto">
                                <table class="w-full text-left">
                                    <thead class="bg-white/5">
                                        <tr>
                                            <th class="px-6 py-3 text-[11px] font-bold text-slate-500 uppercase tracking-wider">ID</th>
                                            <th class="px-6 py-3 text-[11px] font-bold text-slate-500 uppercase tracking-wider">Klien</th>
                                            <th class="px-6 py-3 text-[11px] font-bold text-slate-500 uppercase tracking-wider">Paket</th>
                                            <th class="px-6 py-3 text-[11px] font-bold text-slate-500 uppercase tracking-wider">Status</th>
                                            <th class="px-6 py-3 text-[11px] font-bold text-slate-500 uppercase tracking-wider">Progress</th>
                                        </tr>
                                    </thead>
                                    <tbody class="divide-y divide-white/5" id="orders-table-body">
                                        <tr><td colspan="5" class="text-center py-4 text-slate-500">Memuat...</td></tr>
                                    </tbody>
                                </table>
                            </div>
                            <!-- Pagination -->
                            <div class="p-4 border-t border-white/5 flex items-center justify-between" id="pagination-container">
                                <button id="prev-page" class="px-3 py-1 text-xs rounded bg-white/5 hover:bg-white/10 text-white disabled:opacity-50 transition-colors">Previous</button>
                                <span class="text-xs text-slate-400" id="page-info">Page 1</span>
                                <button id="next-page" class="px-3 py-1 text-xs rounded bg-white/5 hover:bg-white/10 text-white disabled:opacity-50 transition-colors">Next</button>
                            </div>
                        </div>
                    </section>
                </div>

                <!-- CS Dashboard -->
                <div id="cs-dashboard-content" class="hidden space-y-4">
                    <!-- Metrics & Quick Actions -->
                    <section class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <!-- New Order Action -->
                        <a href="order.html?action=new" class="group relative overflow-hidden rounded-2xl bg-gradient-to-br from-primary to-orange-600 p-6 shadow-lg hover:shadow-primary/25 transition-all duration-300">
                            <div class="absolute right-0 top-0 -mr-6 -mt-6 h-24 w-24 rounded-full bg-white/10 blur-xl group-hover:bg-white/20 transition-colors"></div>
                            <div class="relative z-10 flex flex-col h-full justify-between">
                                <div class="p-3 bg-white/20 w-fit rounded-xl mb-4 backdrop-blur-sm">
                                    <span class="material-symbols-outlined text-white text-2xl">add_circle</span>
                                </div>
                                <div>
                                    <h3 class="text-lg font-bold text-white mb-1">Input Order Baru</h3>
                                    <p class="text-white/80 text-xs">Buat pesanan klien baru atau repeat order</p>
                                </div>
                            </div>
                        </a>

                        <!-- My Active Orders -->
                        <div class="glass-panel rounded-2xl p-6 flex flex-col justify-between relative overflow-hidden group hover:border-primary/50 transition-colors">
                            <div class="absolute right-0 top-0 p-6 opacity-10 group-hover:opacity-20 transition-opacity">
                                <span class="material-symbols-outlined text-6xl text-white">shopping_bag</span>
                            </div>
                            <div>
                                <p class="text-sm text-slate-400 font-medium mb-1">Order Aktif Saya</p>
                                <h3 id="cs-active-orders-count" class="text-3xl font-bold text-white">0</h3>
                            </div>
                            <div class="mt-4 flex items-center gap-2 text-xs text-emerald-400 bg-emerald-400/10 w-fit px-2 py-1 rounded-lg">
                                <span class="material-symbols-outlined text-sm">trending_up</span>
                                <span>Sedang berjalan</span>
                            </div>
                        </div>

                        <!-- My Commission -->
                        <div class="glass-panel rounded-2xl p-6 flex flex-col justify-between relative overflow-hidden group hover:border-primary/50 transition-colors">
                            <div class="absolute right-0 top-0 p-6 opacity-10 group-hover:opacity-20 transition-opacity">
                                <span class="material-symbols-outlined text-6xl text-emerald-400">payments</span>
                            </div>
                            <div>
                                <p class="text-sm text-slate-400 font-medium mb-1">Komisi Bulan Ini</p>
                                <h3 id="cs-commission-total" class="text-3xl font-bold text-emerald-400">Rp 0</h3>
                            </div>
                            <div class="mt-4 flex items-center gap-2 text-xs text-slate-400">
                                <span class="material-symbols-outlined text-sm">calendar_month</span>
                                <span>Periode saat ini</span>
                            </div>
                        </div>
                    </section>

                    <!-- H-2 Expiry Reminder -->
                    <section id="cs-expiry-section" class="hidden glass-panel rounded-2xl overflow-hidden mb-4 border-l-4 border-l-red-500">
                        <div class="p-6 border-b border-white/5 flex justify-between items-center bg-red-500/5">
                            <div class="flex items-center gap-2">
                                <span class="material-symbols-outlined text-red-400 animate-pulse">notification_important</span>
                                <div>
                                    <h4 class="text-lg font-bold text-white">Jatuh Tempo (H-2)</h4>
                                    <p class="text-xs text-red-300">Segera hubungi klien untuk perpanjangan</p>
                                </div>
                            </div>
                            <span id="cs-expiry-count" class="text-xs font-bold bg-red-500 text-white px-2.5 py-1 rounded-full shadow-lg shadow-red-500/20">0</span>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full text-left">
                                <tbody id="cs-expiry-body" class="divide-y divide-white/5">
                                    <!-- Rows injected via JS -->
                                </tbody>
                            </table>
                        </div>
                    </section>

                    <!-- Recent Orders Table -->
                    <section class="glass-panel rounded-2xl overflow-hidden">
                        <div class="p-6 border-b border-white/5 flex justify-between items-center">
                            <h4 class="text-lg font-bold text-white">Pesanan Terakhir Saya</h4>
                            <a href="orders.html" class="text-xs font-semibold text-primary hover:underline">Lihat Semua</a>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full text-left">
                                <thead class="bg-white/5">
                                    <tr>
                                        <th class="px-6 py-3 text-[11px] font-bold text-slate-500 uppercase tracking-wider">Project</th>
                                        <th class="px-6 py-3 text-[11px] font-bold text-slate-500 uppercase tracking-wider">Klien</th>
                                        <th class="px-6 py-3 text-[11px] font-bold text-slate-500 uppercase tracking-wider">Status</th>
                                        <th class="px-6 py-3 text-[11px] font-bold text-slate-500 uppercase tracking-wider text-right">Tanggal</th>
                                    </tr>
                                </thead>
                                <tbody id="cs-recent-orders-body" class="divide-y divide-white/5">
                                    <tr>
                                        <td colspan="4" class="px-6 py-8 text-center text-slate-500 italic">Memuat data...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </section>
                </div>

                <!-- Editor Dashboard -->
                <div id="editor-dashboard-content" class="hidden space-y-4">
                    <!-- Editor Metrics -->
                    <section class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <!-- Active Content Tasks -->
                        <div class="glass-panel rounded-2xl p-6 flex flex-col justify-between relative overflow-hidden group hover:border-primary/50 transition-colors">
                            <div class="absolute right-0 top-0 p-6 opacity-10 group-hover:opacity-20 transition-opacity">
                                <span class="material-symbols-outlined text-6xl text-purple-400">video_library</span>
                            </div>
                            <div>
                                <p class="text-sm text-slate-400 font-medium mb-1">Antrian Konten</p>
                                <h3 id="editor-queue-count" class="text-3xl font-bold text-white">0</h3>
                            </div>
                            <div class="mt-4 flex items-center gap-2 text-xs text-purple-400 bg-purple-400/10 w-fit px-2 py-1 rounded-lg">
                                <span class="material-symbols-outlined text-sm">pending_actions</span>
                                <span>Perlu dikerjakan</span>
                            </div>
                        </div>

                        <!-- Completed Content -->
                        <div class="glass-panel rounded-2xl p-6 flex flex-col justify-between relative overflow-hidden group hover:border-primary/50 transition-colors">
                            <div class="absolute right-0 top-0 p-6 opacity-10 group-hover:opacity-20 transition-opacity">
                                <span class="material-symbols-outlined text-6xl text-emerald-400">check_circle</span>
                            </div>
                            <div>
                                <p class="text-sm text-slate-400 font-medium mb-1">Konten Selesai (Bulan Ini)</p>
                                <h3 id="editor-completed-count" class="text-3xl font-bold text-white">0</h3>
                            </div>
                            <div class="mt-4 flex items-center gap-2 text-xs text-emerald-400 bg-emerald-400/10 w-fit px-2 py-1 rounded-lg">
                                <span class="material-symbols-outlined text-sm">task_alt</span>
                                <span>Siap Iklan / Tayang</span>
                            </div>
                        </div>

                        <!-- Editor Commission -->
                        <div class="glass-panel rounded-2xl p-6 flex flex-col justify-between relative overflow-hidden group hover:border-primary/50 transition-colors">
                            <div class="absolute right-0 top-0 p-6 opacity-10 group-hover:opacity-20 transition-opacity">
                                <span class="material-symbols-outlined text-6xl text-emerald-400">payments</span>
                            </div>
                            <div>
                                <p class="text-sm text-slate-400 font-medium mb-1">Komisi Bulan Ini</p>
                                <h3 id="editor-commission-total" class="text-3xl font-bold text-emerald-400">Rp 0</h3>
                            </div>
                            <div class="mt-4 flex items-center gap-2 text-xs text-slate-400">
                                <span class="material-symbols-outlined text-sm">calendar_month</span>
                                <span>Periode saat ini</span>
                            </div>
                        </div>
                    </section>

                    <!-- Content Tasks Table -->
                    <section class="glass-panel rounded-2xl overflow-hidden">
                        <div class="p-6 border-b border-white/5 flex justify-between items-center">
                            <h4 class="text-lg font-bold text-white">Daftar Tugas Konten</h4>
                            <a href="orders.html" class="text-xs font-semibold text-primary hover:underline">Lihat Semua</a>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full text-left">
                                <thead class="bg-white/5">
                                    <tr>
                                        <th class="px-6 py-3 text-[11px] font-bold text-slate-500 uppercase tracking-wider">Project</th>
                                        <th class="px-6 py-3 text-[11px] font-bold text-slate-500 uppercase tracking-wider">Klien</th>
                                        <th class="px-6 py-3 text-[11px] font-bold text-slate-500 uppercase tracking-wider">Status</th>
                                        <th class="px-6 py-3 text-[11px] font-bold text-slate-500 uppercase tracking-wider text-right">Aksi</th>
                                    </tr>
                                </thead>
                                <tbody id="editor-tasks-body" class="divide-y divide-white/5">
                                    <tr>
                                        <td colspan="4" class="px-6 py-8 text-center text-slate-500 italic">Memuat antrian...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </section>
                </div>

                <!-- Advertiser Dashboard -->
                <div id="advertiser-dashboard-content" class="hidden space-y-4">
                    <!-- Advertiser Metrics -->
                    <section class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <!-- Ready to Run -->
                        <div class="glass-panel rounded-2xl p-6 flex flex-col justify-between relative overflow-hidden group hover:border-primary/50 transition-colors">
                            <div class="absolute right-0 top-0 p-6 opacity-10 group-hover:opacity-20 transition-opacity">
                                <span class="material-symbols-outlined text-6xl text-blue-400">campaign</span>
                            </div>
                            <div>
                                <p class="text-sm text-slate-400 font-medium mb-1">Siap Iklan</p>
                                <h3 id="advertiser-ready-count" class="text-3xl font-bold text-white">0</h3>
                            </div>
                            <div class="mt-4 flex items-center gap-2 text-xs text-blue-400 bg-blue-400/10 w-fit px-2 py-1 rounded-lg">
                                <span class="material-symbols-outlined text-sm">ads_click</span>
                                <span>Menunggu setup</span>
                            </div>
                        </div>

                        <!-- Running Ads -->
                        <div class="glass-panel rounded-2xl p-6 flex flex-col justify-between relative overflow-hidden group hover:border-primary/50 transition-colors">
                            <div class="absolute right-0 top-0 p-6 opacity-10 group-hover:opacity-20 transition-opacity">
                                <span class="material-symbols-outlined text-6xl text-emerald-400">rocket_launch</span>
                            </div>
                            <div>
                                <p class="text-sm text-slate-400 font-medium mb-1">Iklan Tayang</p>
                                <h3 id="advertiser-running-count" class="text-3xl font-bold text-white">0</h3>
                            </div>
                            <div class="mt-4 flex items-center gap-2 text-xs text-emerald-400 bg-emerald-400/10 w-fit px-2 py-1 rounded-lg">
                                <span class="material-symbols-outlined text-sm">trending_up</span>
                                <span>Sedang aktif</span>
                            </div>
                        </div>

                        <!-- Advertiser Commission -->
                        <div class="glass-panel rounded-2xl p-6 flex flex-col justify-between relative overflow-hidden group hover:border-primary/50 transition-colors">
                            <div class="absolute right-0 top-0 p-6 opacity-10 group-hover:opacity-20 transition-opacity">
                                <span class="material-symbols-outlined text-6xl text-emerald-400">payments</span>
                            </div>
                            <div>
                                <p class="text-sm text-slate-400 font-medium mb-1">Komisi Bulan Ini</p>
                                <h3 id="advertiser-commission-total" class="text-3xl font-bold text-emerald-400">Rp 0</h3>
                            </div>
                            <div class="mt-4 flex items-center gap-2 text-xs text-slate-400">
                                <span class="material-symbols-outlined text-sm">calendar_month</span>
                                <span>Periode saat ini</span>
                            </div>
                        </div>
                    </section>

                    <!-- Ads Tasks Table -->
                    <section class="glass-panel rounded-2xl overflow-hidden">
                        <div class="p-6 border-b border-white/5 flex justify-between items-center">
                            <h4 class="text-lg font-bold text-white">Antrian Iklan</h4>
                            <a href="orders.html" class="text-xs font-semibold text-primary hover:underline">Lihat Semua</a>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full text-left">
                                <thead class="bg-white/5">
                                    <tr>
                                        <th class="px-6 py-3 text-[11px] font-bold text-slate-500 uppercase tracking-wider">Project</th>
                                        <th class="px-6 py-3 text-[11px] font-bold text-slate-500 uppercase tracking-wider">Klien</th>
                                        <th class="px-6 py-3 text-[11px] font-bold text-slate-500 uppercase tracking-wider">Status</th>
                                        <th class="px-6 py-3 text-[11px] font-bold text-slate-500 uppercase tracking-wider text-right">Aksi</th>
                                    </tr>
                                </thead>
                                <tbody id="advertiser-tasks-body" class="divide-y divide-white/5">
                                    <tr>
                                        <td colspan="4" class="px-6 py-8 text-center text-slate-500 italic">Memuat antrian...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </section>
                </div>

                <!-- Bengkel Dashboard -->
                <div id="bengkel-dashboard-content" class="hidden space-y-4">
                    <!-- Bengkel Metrics -->
                    <section class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <!-- Active Tasks -->
                        <div class="glass-panel rounded-2xl p-6 flex flex-col justify-between relative overflow-hidden group hover:border-primary/50 transition-colors">
                            <div class="absolute right-0 top-0 p-6 opacity-10 group-hover:opacity-20 transition-opacity">
                                <span class="material-symbols-outlined text-6xl text-orange-400">build</span>
                            </div>
                            <div>
                                <p class="text-sm text-slate-400 font-medium mb-1">Order Ditangani</p>
                                <h3 id="bengkel-active-count" class="text-3xl font-bold text-white">0</h3>
                            </div>
                            <div class="mt-4 flex items-center gap-2 text-xs text-orange-400 bg-orange-400/10 w-fit px-2 py-1 rounded-lg">
                                <span class="material-symbols-outlined text-sm">handyman</span>
                                <span>Sedang diproses</span>
                            </div>
                        </div>

                        <!-- Completed Tasks -->
                        <div class="glass-panel rounded-2xl p-6 flex flex-col justify-between relative overflow-hidden group hover:border-primary/50 transition-colors">
                            <div class="absolute right-0 top-0 p-6 opacity-10 group-hover:opacity-20 transition-opacity">
                                <span class="material-symbols-outlined text-6xl text-emerald-400">check_circle</span>
                            </div>
                            <div>
                                <p class="text-sm text-slate-400 font-medium mb-1">Selesai Bulan Ini</p>
                                <h3 id="bengkel-completed-count" class="text-3xl font-bold text-white">0</h3>
                            </div>
                            <div class="mt-4 flex items-center gap-2 text-xs text-emerald-400 bg-emerald-400/10 w-fit px-2 py-1 rounded-lg">
                                <span class="material-symbols-outlined text-sm">done_all</span>
                                <span>Tugas selesai</span>
                            </div>
                        </div>

                        <!-- Bengkel Commission -->
                        <div class="glass-panel rounded-2xl p-6 flex flex-col justify-between relative overflow-hidden group hover:border-primary/50 transition-colors">
                            <div class="absolute right-0 top-0 p-6 opacity-10 group-hover:opacity-20 transition-opacity">
                                <span class="material-symbols-outlined text-6xl text-emerald-400">payments</span>
                            </div>
                            <div>
                                <p class="text-sm text-slate-400 font-medium mb-1">Komisi Bulan Ini</p>
                                <h3 id="bengkel-commission-total" class="text-3xl font-bold text-emerald-400">Rp 0</h3>
                            </div>
                            <div class="mt-4 flex items-center gap-2 text-xs text-slate-400">
                                <span class="material-symbols-outlined text-sm">calendar_month</span>
                                <span>Periode saat ini</span>
                            </div>
                        </div>
                    </section>

                    <!-- Bengkel Tasks Table -->
                    <section class="glass-panel rounded-2xl overflow-hidden">
                        <div class="p-6 border-b border-white/5 flex justify-between items-center">
                            <h4 class="text-lg font-bold text-white">Daftar Tugas Bengkel</h4>
                            <a href="orders.html" class="text-xs font-semibold text-primary hover:underline">Lihat Semua</a>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full text-left">
                                <thead class="bg-white/5">
                                    <tr>
                                        <th class="px-6 py-3 text-[11px] font-bold text-slate-500 uppercase tracking-wider">Project</th>
                                        <th class="px-6 py-3 text-[11px] font-bold text-slate-500 uppercase tracking-wider">Klien</th>
                                        <th class="px-6 py-3 text-[11px] font-bold text-slate-500 uppercase tracking-wider">Status</th>
                                        <th class="px-6 py-3 text-[11px] font-bold text-slate-500 uppercase tracking-wider text-right">Aksi</th>
                                    </tr>
                                </thead>
                                <tbody id="bengkel-tasks-body" class="divide-y divide-white/5">
                                    <tr>
                                        <td colspan="4" class="px-6 py-8 text-center text-slate-500 italic">Memuat antrian...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </section>
                </div>

                <!-- Keuangan Dashboard -->
                <div id="keuangan-dashboard-content" class="hidden space-y-4">
                    <!-- Keuangan Metrics -->
                    <section class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <!-- Total Omset -->
                        <div class="glass-panel rounded-2xl p-6 flex flex-col justify-between relative overflow-hidden group hover:border-primary/50 transition-colors">
                            <div class="absolute right-0 top-0 p-6 opacity-10 group-hover:opacity-20 transition-opacity">
                                <span class="material-symbols-outlined text-6xl text-emerald-400">attach_money</span>
                            </div>
                            <div>
                                <p class="text-sm text-slate-400 font-medium mb-1">Total Omset (Bulan Ini)</p>
                                <h3 id="keuangan-omset" class="text-3xl font-bold text-white">Rp 0</h3>
                            </div>
                            <div class="mt-4 flex items-center gap-2 text-xs text-emerald-400 bg-emerald-400/10 w-fit px-2 py-1 rounded-lg">
                                <span class="material-symbols-outlined text-sm">trending_up</span>
                                <span>Pemasukan kotor</span>
                            </div>
                        </div>

                        <!-- Total Komisi -->
                        <div class="glass-panel rounded-2xl p-6 flex flex-col justify-between relative overflow-hidden group hover:border-primary/50 transition-colors">
                            <div class="absolute right-0 top-0 p-6 opacity-10 group-hover:opacity-20 transition-opacity">
                                <span class="material-symbols-outlined text-6xl text-red-400">payments</span>
                            </div>
                            <div>
                                <p class="text-sm text-slate-400 font-medium mb-1">Total Komisi (Bulan Ini)</p>
                                <h3 id="keuangan-commission" class="text-3xl font-bold text-white">Rp 0</h3>
                            </div>
                            <div class="mt-4 flex items-center gap-2 text-xs text-red-400 bg-red-400/10 w-fit px-2 py-1 rounded-lg">
                                <span class="material-symbols-outlined text-sm">trending_down</span>
                                <span>Pengeluaran tim</span>
                            </div>
                        </div>

                        <!-- Net Profit -->
                        <div class="glass-panel rounded-2xl p-6 flex flex-col justify-between relative overflow-hidden group hover:border-primary/50 transition-colors">
                            <div class="absolute right-0 top-0 p-6 opacity-10 group-hover:opacity-20 transition-opacity">
                                <span class="material-symbols-outlined text-6xl text-blue-400">account_balance_wallet</span>
                            </div>
                            <div>
                                <p class="text-sm text-slate-400 font-medium mb-1">Estimasi Laba Bersih</p>
                                <h3 id="keuangan-net" class="text-3xl font-bold text-blue-400">Rp 0</h3>
                            </div>
                            <div class="mt-4 flex items-center gap-2 text-xs text-slate-400">
                                <span class="material-symbols-outlined text-sm">calculate</span>
                                <span>Omset - Komisi</span>
                            </div>
                        </div>
                    </section>

                    <!-- Financial Overview Table -->
                    <section class="glass-panel rounded-2xl overflow-hidden">
                        <div class="p-6 border-b border-white/5 flex justify-between items-center">
                            <h4 class="text-lg font-bold text-white">Ringkasan Order Bulan Ini</h4>
                            <a href="finance.html" class="text-xs font-semibold text-primary hover:underline">Detail Keuangan</a>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full text-left">
                                <thead class="bg-white/5">
                                    <tr>
                                        <th class="px-6 py-3 text-[11px] font-bold text-slate-500 uppercase tracking-wider">Tanggal</th>
                                        <th class="px-6 py-3 text-[11px] font-bold text-slate-500 uppercase tracking-wider">Klien / Paket</th>
                                        <th class="px-6 py-3 text-[11px] font-bold text-slate-500 uppercase tracking-wider text-right">Harga Paket</th>
                                        <th class="px-6 py-3 text-[11px] font-bold text-slate-500 uppercase tracking-wider text-right">Komisi</th>
                                        <th class="px-6 py-3 text-[11px] font-bold text-slate-500 uppercase tracking-wider text-right">Net</th>
                                    </tr>
                                </thead>
                                <tbody id="keuangan-table-body" class="divide-y divide-white/5">
                                    <tr>
                                        <td colspan="5" class="px-6 py-8 text-center text-slate-500 italic">Memuat data...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </section>
                </div>

            </main>
        </div>
        <div id="include-footer"></div>
    </div>
    <script src="js/include.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            const role = localStorage.getItem('role') || 'super_admin';
            const userId = localStorage.getItem('user_id');

            if (role === 'CS') {
                // Toggle Views
                document.getElementById('admin-dashboard-content').classList.add('hidden');
                document.getElementById('editor-dashboard-content').classList.add('hidden');
                document.getElementById('cs-dashboard-content').classList.remove('hidden');
                
                // Load CS Data
                await loadCSData(userId);
            } else if (role.toLowerCase() === 'editor') {
                // Editor View
                document.getElementById('admin-dashboard-content').classList.add('hidden');
                document.getElementById('cs-dashboard-content').classList.add('hidden');
                document.getElementById('advertiser-dashboard-content').classList.add('hidden');
                document.getElementById('editor-dashboard-content').classList.remove('hidden');

                // Load Editor Data
                await loadEditorData(userId);
            } else if (role.toLowerCase() === 'advertiser') {
                // Advertiser View
                document.getElementById('admin-dashboard-content').classList.add('hidden');
                document.getElementById('cs-dashboard-content').classList.add('hidden');
                document.getElementById('editor-dashboard-content').classList.add('hidden');
                document.getElementById('advertiser-dashboard-content').classList.remove('hidden');

                // Load Advertiser Data
                await loadAdvertiserData(userId);
            } else if (role === 'Team Bengkel' || role.toLowerCase() === 'team bengkel') {
                // Bengkel View
                document.getElementById('admin-dashboard-content').classList.add('hidden');
                document.getElementById('cs-dashboard-content').classList.add('hidden');
                document.getElementById('editor-dashboard-content').classList.add('hidden');
                document.getElementById('advertiser-dashboard-content').classList.add('hidden');
                document.getElementById('bengkel-dashboard-content').classList.remove('hidden');

                // Load Bengkel Data
                await loadBengkelData(userId);
            } else if (role.toLowerCase() === 'keuangan') {
                // Keuangan View
                document.getElementById('admin-dashboard-content').classList.add('hidden');
                document.getElementById('cs-dashboard-content').classList.add('hidden');
                document.getElementById('editor-dashboard-content').classList.add('hidden');
                document.getElementById('advertiser-dashboard-content').classList.add('hidden');
                document.getElementById('bengkel-dashboard-content').classList.add('hidden');
                document.getElementById('keuangan-dashboard-content').classList.remove('hidden');

                // Load Keuangan Data
                await loadKeuanganData();
            } else {
                // Ensure Admin View is shown (default, but good to be explicit)
                document.getElementById('admin-dashboard-content').classList.remove('hidden');
                document.getElementById('cs-dashboard-content').classList.add('hidden');
                document.getElementById('editor-dashboard-content').classList.add('hidden');
                document.getElementById('advertiser-dashboard-content').classList.add('hidden');
                document.getElementById('bengkel-dashboard-content').classList.add('hidden');
                document.getElementById('keuangan-dashboard-content').classList.add('hidden');

                // Load Admin Data
                await loadAdminData();
            }
        });

        async function loadAdminData() {
            try {
                const statsRes = await fetch('/api/dashboard/stats');
                const stats = await statsRes.json();
                
                document.getElementById('stat-active-orders').textContent = stats.activeOrders || 0;
                document.getElementById('stat-revenue').textContent = new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR', maximumFractionDigits: 0 }).format(stats.revenueThisMonth || 0);
                document.getElementById('stat-new-clients').textContent = stats.newClientsThisMonth || 0;
                document.getElementById('stat-active-campaigns').textContent = stats.activeCampaigns || 0;

                await loadAdminOrders(1);
            } catch (e) {
                console.error('Failed to load admin data', e);
            }
        }

        async function loadAdminOrders(page) {
            try {
                const limit = 5;
                const res = await fetch(`/api/orders?page=${page}&limit=${limit}`);
                const json = await res.json();
                const { data, meta } = json;
                
                const tbody = document.getElementById('orders-table-body');
                if (!tbody) return;
                tbody.innerHTML = '';
                
                if (data.length === 0) {
                     tbody.innerHTML = '<tr><td colspan="5" class="px-6 py-8 text-center text-slate-500 italic">Belum ada pesanan</td></tr>';
                } else {
                    data.forEach(order => {
                        const tr = document.createElement('tr');
                        tr.className = 'hover:bg-white/5 transition-colors';
                        let statusClass = 'text-slate-400 bg-slate-400/10';
                        if (order.status === 'completed') statusClass = 'text-emerald-500 bg-emerald-500/10';
                        else if (order.status === 'pending') statusClass = 'text-amber-500 bg-amber-500/10';
                        else if (order.status === 'in_progress') statusClass = 'text-blue-500 bg-blue-500/10';

                        tr.innerHTML = `
                            <td class="px-6 py-4 text-sm font-medium text-slate-400">#${order.id}</td>
                            <td class="px-6 py-4 text-sm font-semibold text-white">
                                ${order.businessName || order.clientName || '-'}
                                <div class="text-[10px] text-slate-500 font-normal">${order.clientWhatsapp || ''}</div>
                            </td>
                            <td class="px-6 py-4 text-sm text-slate-400">${order.packageName || '-'}</td>
                            <td class="px-6 py-4">
                                <span class="px-2 py-1 text-[10px] rounded-full ${statusClass}">${order.status}</span>
                            </td>
                            <td class="px-6 py-4 text-sm text-slate-400">
                                <div class="w-full bg-slate-700 rounded-full h-1.5 mb-1">
                                    <div class="bg-primary h-1.5 rounded-full" style="width: ${order.progress_percent || 0}%"></div>
                                </div>
                                <div class="text-[10px] text-right">${order.progress_percent || 0}%</div>
                            </td>
                        `;
                        tbody.appendChild(tr);
                    });
                }

                const pageInfo = document.getElementById('page-info');
                const prevBtn = document.getElementById('prev-page');
                const nextBtn = document.getElementById('next-page');

                if (pageInfo) pageInfo.textContent = `Page ${meta.page} of ${meta.totalPages}`;
                if (prevBtn) {
                    prevBtn.disabled = meta.page <= 1;
                    prevBtn.onclick = () => loadAdminOrders(meta.page - 1);
                }
                if (nextBtn) {
                    nextBtn.disabled = meta.page >= meta.totalPages;
                    nextBtn.onclick = () => loadAdminOrders(meta.page + 1);
                }

            } catch (e) {
                console.error('Failed to load orders', e);
            }
        }

        async function loadKeuanganData() {
            try {
                const now = new Date();
                const currentMonth = now.getMonth();
                const currentYear = now.getFullYear();
                const firstDay = new Date(currentYear, currentMonth, 1).toISOString().split('T')[0];
                const lastDay = new Date(currentYear, currentMonth + 1, 0).toISOString().split('T')[0];

                const res = await fetch(`/api/finance/orders?startDate=${firstDay}&endDate=${lastDay}`);
                const orders = await res.json();

                let totalOmset = 0;
                let totalCommission = 0;

                const tbody = document.getElementById('keuangan-table-body');
                
                if (orders.length === 0) {
                    tbody.innerHTML = '<tr><td colspan="5" class="px-6 py-8 text-center text-slate-500 italic">Tidak ada transaksi bulan ini</td></tr>';
                } else {
                    let html = '';
                    orders.forEach(order => {
                        const price = parseFloat(order.package_price) || 0;
                        const comm = parseFloat(order.total_commission) || 0;
                        const net = price - comm;

                        totalOmset += price;
                        totalCommission += comm;

                        const date = new Date(order.created_at).toLocaleDateString('id-ID', { day: 'numeric', month: 'short' });

                        html += `
                            <tr class="hover:bg-white/5 transition-colors">
                                <td class="px-6 py-4 text-sm text-slate-300">${date}</td>
                                <td class="px-6 py-4 text-sm text-slate-300">
                                    <div class="font-medium text-white">${order.client_name || '-'}</div>
                                    <div class="text-[10px] text-slate-500">${order.package_name || '-'}</div>
                                </td>
                                <td class="px-6 py-4 text-sm text-right text-slate-300">Rp ${price.toLocaleString('id-ID')}</td>
                                <td class="px-6 py-4 text-sm text-right text-red-400">Rp ${comm.toLocaleString('id-ID')}</td>
                                <td class="px-6 py-4 text-sm text-right font-medium text-emerald-400">Rp ${net.toLocaleString('id-ID')}</td>
                            </tr>
                        `;
                    });
                    tbody.innerHTML = html;
                }

                document.getElementById('keuangan-omset').textContent = `Rp ${totalOmset.toLocaleString('id-ID')}`;
                document.getElementById('keuangan-commission').textContent = `Rp ${totalCommission.toLocaleString('id-ID')}`;
                document.getElementById('keuangan-net').textContent = `Rp ${(totalOmset - totalCommission).toLocaleString('id-ID')}`;

            } catch (e) {
                console.error('Error loading keuangan data:', e);
            }
        }
    </script>
</body>
</html>